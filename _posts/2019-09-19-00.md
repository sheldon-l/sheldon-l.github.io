---
layout: default
title: Installation and Update of V2ray for Client
published_at: "2019-09-19"
updated_at: "2019-11-29"
author: Taners
tags: [Installation, V2ray, Client, VPN]
status: published
---

[BACK TO HOME](https://tane-rs.github.io)

# {{page.title}}

by {{page.author}} |
published at {{page.published_at | date: "%Y-%m-%d"}} |
updated at {{ page.updated_at | date: "%Y-%m-%d" }}

---

## 说明

- [官方版本(墙内不一定能访问)](https://github.com/v2ray/v2ray-core/releases)
- [官方文档(墙内不一定能访问)](https://www.v2ray.com/)
- [官网推荐的下载和配置工具(墙内不一定能访问)](https://www.v2ray.com/awesome/tools.html)
- 下文的下载链接是从官方备份的, 墙内可用, 如果发现不幸被..., 请联系
- 文末的注意事项请悉知

- **从安装到使用一共三个步骤, 每个步骤找到对应的系统照做即可，需要远程协助请联系并安排时间，需要10～30分钟**

## 第一步：安装或更新
### 安卓手机
- 墙内用手机浏览器或者电脑[下载](https://github.com/tane-rs/tane-rs.github.io/raw/master/tools/v2ray/com_v2ray_ang_1.0.5_08_08_2019.apk); [老安卓备用的老版本](https://github.com/tane-rs/tane-rs.github.io/raw/master/tools/v2ray/v2rayNG_v1.0.0_apkpure.com.apk);
- 手机浏览器下载后一般在浏览器的菜单栏的 `下载` 中会看到下载好的 `.apk` 文件，点击安装，在后续过程中注意点选允许安装; 电脑下载的则打开USB试调，以文件管理的模式连接，放到某个文件夹下，再用手机的文件管理其找到这个 `.apk` 文件，点击安装；

  
### 苹果手机
- 需要越狱, 系统版本较低的可以越狱(去淘宝找人帮忙). 版本较高暂时不可越狱, 这种情况比较杯具, 任何上网工具均无效;
- 越狱成功后一般有 `PP助手`， 从 `PP助手` 下载 `Shadowrocket` 即可;

### Win10 或 MacOS
- 下载:
  - Win10 64位 [下载](https://github.com/tane-rs/tane-rs.github.io/raw/master/tools/v2ray/v2rayN-Core-win64.zip), 解压即可;

  - MacOS [下载](https://github.com/tane-rs/tane-rs.github.io/raw/master/tools/v2ray/v2rayU-Core-macos.zip), 解压即可;

  - 未在此列出的版本也支持, 因受众少, 请个别联系, 或者通过已经接入国际互联网的设备打开本文头部官方版本的链接下载, 其他步骤类似.

- 免安装, 整个文件夹一起可随意移动到你喜欢的文件夹下

### Linux
- [下载](https://github.com/tane-rs/tane-rs.github.io/blob/master/tools/v2ray/v2ray-linux-64_4.21.2.zip) 到本地 Downloads 文件夹下；
- 执行: 
    ```bash
    cd ~/Downloads
    curl https://install.direct/go.sh
    bash go.sh --local v2ray-linux-64_4.21.2.zip
    ```
  
## 第二步：准备线路和浏览器
- 线路供应方已提供一份共享文档，内含URL链接，二维码, `*.json` 文件， 在下述步骤中按需使用.
- 浏览器自行选择以下浏览器，也可以全部都装，不冲突：
  - Chromium
    - 推荐理由：适应性优于 Firefox 和 Chrome， **即使以下操作时 socks5 关闭或配置错误，竟然还能上网**； 开源，无痛对接 Chrome 等浏览器，并且轻巧快速，完全满足非开发人员的日常所需；已知缺陷：数据科学工具 Jpyter 打不开；
  - Firefox 
    - 推荐理由：**可以独立配置代理**，已知缺陷：对屏幕尺寸的反应和用户体验不如 Chrome 和 Chromium；
  - Chrome
    - 推荐理由：还没发现什么缺陷；

## 第三步：配置和打开 V2ray
### 手机端
- 安卓手机打开刚才下载安装的 `V2rayNG` , 扫描二维码即可.
  
### Win10

**方法一：**
- 进入第一步中下载并解压所得的文件夹，其中有一个名为 `config.json` 的配置文件， 下面的操作是为了修改这份配置文件：
  - 下载第二步中提供的 `*.json` 文件, 重命名为 `config.json`;
  - 复制新的 `config.json` 到上述文件夹替换原有的 `config.json`;
  - 打开同一文件夹下的 `v2ray.dmg` 的可执行文件， 终端显示 ‘...started’ 表示已经打开；

**方法二：**
- 直接打开 `v2rayN.exe` , 这是方法一的图形化操作界面, 从菜单中导入 `vmess` URL 链接即可.

**最后：**
- 打开后还不能上网，因为该协议需要借助本地 `socks5` 中转加密:

  - 关闭 win10 的默认代理:
    - 任务栏搜索 `proxy(代理)` 进入代理服务器设置, 将这里所有的勾选都清空;

  - 手动配置代理:
    - 任务栏搜索 `internet`, 在搜索结果中出现位于控制面板的 `Internet 选项`, 点击进入;
    - 点击 `连接(connections)` 选项卡, 点击 `局域网设置`, 将 `代理服务器` 模块中 `为LAN使用代理服务器` 和 `对本地地址不使用代理服务器` 的选项勾选上, 其他选项全部清空, 再点击 `高级` 进入代理设置页;
    - 取消 `对所有协议均使用相同的代理服务器` 的勾选, 若该页面已填写字段, 则将所有字段清空, 再在 `socks(win10中文版可能被翻译成'套接字')` 栏输入地址 `127.0.0.1` 和端口 `1080`，点击确定;

    - 若需关闭, 则取消上述 `代理服务器` 模块中 `为LAN使用代理服务器` 的勾选.

    - 参考下图
    ![参考下图](../tools/v2ray/img/win10-socks5.png):

- 若需关闭 v2ray, 从任务栏退出即可.

### MacOS
- 备注：
    - 若操作过程中 Mac 提示 '需要执行其他来源软件' 并找不到 `打开`的按钮， 说明需要 `允许任何来源软件运行的权限`，如何操作请参考 [Mac 设置允许任何来源软件运行](https://blog.csdn.net/bitcser/article/details/53611696)， 此时再打开 `v2ray` 可执行文件，会提示 '是否打开其他来源的软件' ，此时选择 `打开` 即可. 下面开始操作。


  
**方法一：**
- 进入第一步中下载并解压所得的文件夹，其中有一个名为 `config.json` 的配置文件， 下面的操作是为了修改这份配置文件：
  - 下载第二步中提供的 `*.json` 文件, 重命名为 `config.json`;
  - 复制新的 `config.json` 到上述文件夹替换原有的 `config.json`;
  - 打开同一文件夹下的 `v2ray.dmg` 的可执行文件， 终端显示 ‘...started’ 表示已经打开；
  
**方法二：**
- 直接打开 `v2rayU.dmg`， 这是方法一的图形化操作界面, 从菜单中导入 `vmess` URL 链接即可；
  
  
**最后：**
- 打开后还不能上网，因为该协议需要借助本地 `socks5` 中转加密:
  - `设置` - `网络` - `高级` 按钮 - `代理` 选项卡 - 勾选`socks5`后在右侧输入地址 `127.0.0.1`和端口 `1080`，确定并应用;
  - 如果需要关闭系统 `socks5`, 只要取消勾选的 `socks5` 即可;

- 若需关闭 v2ray, 关闭终端(一个黑色的, 都是命令行的窗口)即可.

### Linux
- 下载第二步中提供的 `*.json` 文件, 替换 `/etc/v2ray/config.json`, 启动， 操作如下：
    ```bash
    cp ~/Downloads/FileYouHaveGot.json /etc/v2ray/config.json
    systemctl start v2ray
    systemctl enable v2ray

    # 其他操作见官网文档
    ```
- 设置-网络-代理，选择手动配置 `socks host`， 输入地址 `127.0.0.1`和端口 `1080`，确定并应用

## 使用须知

### 常见问题
- 本地时间务必与互联网时间同步

### 如何仅让PC端的火狐浏览器上网或断网
- 若仅需 `浏览器代理`, 则可在关闭系统 `socks5` 时打开火狐浏览器的 `socks5`:
  - 下载Firefox: 用 `bing国际版`搜索 firefox, 进入firefox官网下载firefox
  - 打开Firefox, 点击右上角下拉菜单（三条横线）, 点击 `选项(齿轮图标)`, 在选项页搜索 `代理(英文为:proxy)`, 出现 `网络设置(network setting)`, 点选 `手动设置代理(Manual proxy configuration)`, 填写:
    - SOCKS Host: 127.0.0.1; Port: 1080; 勾选 `SOCKS v5` 和 `Proxy DNS when using SOCKS v5` (若窗口小, 显示不全, 请使用滚轮)
  - 保存并关闭即可

- 若需要让除了火狐浏览器以外的其他应用上互联网, 则可在打开系统 `socks5` 时关闭火狐浏览器的 `socks5`
  - 同样进入`网络设置(network setting)`，  选择 `不使用代理 (No Proxy)`

- 使用这两种方案之一，让您可以在不需要切换的情况下同时查看国内和国外资源

### How to Use Tor along with V2ray (特殊情况可用, 比如所有线路都被墙了, 或需要极度匿名)
- [Download](https://www.torproject.org/download/) (需要在墙外就下载好) and unzip, need not installation
- Open desktop icon
- Before connection: 
  - Configure bridge: select offered bridge
  - Proxy:
    - Set Proxy if Use V2ray: Socks 5, address is 127.0.0.1, port should be consistant with above, say '1080' here.
    - Or Don't set Proxy if your V2ray is not avalable, just leave it as blank.
- Connect

### 工具
- 国外很多应用，如 Telegram，支持匿名电话卡注册，大陆可用淘宝搜索‘万众卡’， 月祖2元
- 文章头部的 V2ray 官方资料
- 网络测速：[SeedTest](speedtest.net)
- 查看IP及归属地：[ipip.net](https://www.ipip.net/)

- 推荐应用：
  - Google play
  - Telegram / Telegram web
  - YouTube
  - Google Drive (协作文档)
  - Zoom (在线会议)
  - DuckDuckGo (无痕搜索引擎)
  - Diigo (浏览器扩展应用：保存各种形式的在线笔记)
  - Grammarly (浏览器扩展应用：拼写纠错)
  - Mate Translator (浏览器扩展应用：划词翻译)

  
### 注意事项（为了隐私、安全、效率、减少广告）

- **请不要使用国内服务（比如微信）向我们索要工具，人工智能时代下的机器监听是很恐怖的，请使用 Telegram， Google 等有隐私保障的服务**
- **在安装好后，不要使用手机内置的浏览器浏览国际互联网，应当使用 Chrome, Firefox, Duckduckgo, Cake 等，避免搜索记录被拉清单**
- **请尽量只在工作手机中安装 V2ray，工作手机应尽量：**
  - 使用 Google Drive, Slack 等工具 (虽然国内有类似的工具，但在国际化的业务中尽量避免使用，因为手机号实名认证限制了外籍人员使用国内工具)
  - 不安装国内的社交类服务，因为后门多 (微信真的不适合工作，只适合社交，并且因为不是国际化的平台，外籍人员无法使用，这导致外籍人员也无法使用依赖微信平台以及各种小程序)
  - 不安装国内的管家类服务,比如360，同样因为后门多，手机自带的工具即可
  - 各类国内的购物软件
  - 规避手机制造商：google play 下载安装 `小黑屋` 和 `黑域`， 冻结手机制造商提供的部分敏感而非必须的服务，可以提供远程协助.
  - 规避手机运营商: 不要插入电话卡，连接非工作手机的热点即可，不要连接公共 wifi.

  - **手机是最不安全的设备，请认真考虑以上建议.**
  
### 网络故障时的 Truble Shooting List:

- 检查系统时间：
  
1. 检查系统时间是否与网络同步

- 网络测试：

1. 请打开一个新的 `Terminal` (Win 的 Powershell, Mac 的小火箭)
2. 暂无自动测试脚本，需要手动检测，输入以下命令：
    ```bash
    """ 关闭 v2ray 和系统 socks5 时"""
    ping baidu.com
    # 正常，本地网络连接正常
    # 报错，本地网络连接异常

    """ 打开 v2ray 和系统 socks5 时 """
    ping <config.json 里 outbounds 下的 adress>
    # 正常，服务器地址未被屏蔽
    # 异常，服务器地址被屏蔽
    
    # ping 通，但打不开网站 bing.com， socks5 配置错误
    
    ``` 

- 检查 V2ray 和 Socks5 配置：
  
1. 打开 v2ray 时终端的提示： 应当为 `... started`
2. 是否正确手动设置了 socks5 代理 `127.0.0.1:1080`
3. 打开 v2ray 所在文件夹下一个名为 `config.json` 的配置文件, 是否有损坏, 同时检查里面 `outbounds` 标签下的 `adress` 里的 `adress`， `port`， `id`, `alterId`



- 用 Teamviewer 请求远程协助 
---

{% for tag in page.tags %}
  {{ tag }}
{% endfor %}

[BACK TO HOME](https://tane-rs.github.io)

